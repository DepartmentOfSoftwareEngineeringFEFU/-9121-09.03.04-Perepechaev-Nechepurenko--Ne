import React, { useState, useEffect, useContext } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { AuthContext } from '../context/AuthContext';
import '../styles.css';



  // –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ localStorage)
  const INITIAL_TABLES_DATA = {
   mainAbsorbers : [
    { material: '–°–ª—É—à–∞—Ç–µ–ª–∏', '125': '0,33', '250': '0,41', '500': '0,44', '1000': '0,46', '2000': '0,46', '4000': '0,46', '6000': '0,47' },
    { material: '–í–∑—Ä–æ—Å–ª—ã–π —á–µ–ª–æ–≤–µ–∫ –≤ –∞—É–¥–∏—Ç–æ—Ä–∏–∏', '125': '0,14', '250': '0,22', '500': '0,34', '1000': '0,45', '2000': '0,43', '4000': '0,4', '6000': '-' },
    { material: '–°–ª—É—à–∞—Ç–µ–ª–∏ –Ω–∞ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã—Ö —Å—Ç—É–ª—å—è—Ö', '125': '0,17', '250': '0,36', '500': '0,47', '1000': '0,52', '2000': '0,5', '4000': '0,46', '6000': '0,44' },
    { material: '–ó—Ä–∏—Ç–µ–ª–∏ –Ω–∞ –º—è–≥–∫–æ–º –∫—Ä–µ—Å–ª–µ', '125': '0,25', '250': '0,3', '500': '0,4', '1000': '0,45', '2000': '0,45', '4000': '0,4', '6000': '-' },
    { material: '–ó—Ä–∏—Ç–µ–ª–∏ –Ω–∞ –∂–µ—Å—Ç–∫–æ–º –∫—Ä–µ—Å–ª–µ', '125': '0,2', '250': '0,25', '500': '0,3', '1000': '0,35', '2000': '0,35', '4000': '0,35', '6000': '-' },
    { material: '–ú—É–∑—ã–∫–∞–Ω—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏', '125': '0,4', '250': '0,85', '500': '1,15', '1000': '1,4', '2000': '1,3', '4000': '1,2', '6000': '-' },
    { material: '–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Å–∏–º—Ñ–æ–Ω–∏—á–µ—Å–∫–∏–π –æ—Ä–∫–µ—Å—Ç—Ä)', '125': '0,23', '250': '0,26', '500': '0,26', '1000': '0,29', '2000': '0,33', '4000': '0,36', '6000': '-' },
    { material: '–ö—Ä–µ—Å–ª–æ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–µ', '125': '0,02', '250': '0,02', '500': '0,02', '1000': '0,04', '2000': '0,04', '4000': '0,03', '6000': '0,03' },
    { material: '–ö—Ä–µ—Å–ª–æ —Å –æ–±–∏–≤–∫–æ–π —Å–∏–¥–µ–Ω–∏—è –∏ —Å–ø–∏–Ω–∫–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–∂–µ–π', '125': '0,08', '250': '0,1', '500': '0,12', '1000': '0,1', '2000': '0,1', '4000': '0,08', '6000': '-' },
    { material: '–ö—Ä–µ—Å–ª–æ –ø–æ–ª—É–º—è–≥–∫–æ–µ, –æ–±–∏—Ç–æ–µ —Ç–∫–∞–Ω—å—é', '125': '0,08', '250': '0,1', '500': '0,15', '1000': '0,15', '2000': '0,2', '4000': '0,2', '6000': '-' },
    { material: '–ö—Ä–µ—Å–ª–æ –æ–±–∏—Ç–æ–µ –∫–æ–∂–µ–π', '125': '0,1', '250': '0,12', '500': '0,17', '1000': '0,17', '2000': '0,12', '4000': '0,1', '6000': '0,1' },
    { material: '–ö—Ä–µ—Å–ª–æ –æ–±–∏—Ç–æ–µ –±–∞—Ä—Ö–∞—Ç–æ–º', '125': '0,14', '250': '0,22', '500': '0,31', '1000': '0,4', '2000': '0,52', '4000': '0,6', '6000': '0,62' },
    { material: '–ö—Ä–µ—Å–ª–æ –æ–±–∏—Ç–æ–µ –∫–æ–∂–µ–π –∏ –ø–æ—Ä–æ–ª–æ–Ω–æ–º', '125': '0,05', '250': '0,09', '500': '0,12', '1000': '0,13', '2000': '0,15', '4000': '0,16', '6000': '0,15' },
    { material: '–ö—Ä–µ—Å–ª–æ –º—è–≥–∫–æ–µ, –æ–±–∏—Ç–æ–µ —Ç–∫–∞–Ω—å—é —Å –ø–æ—Ä–∏—Å—Ç—ã–º –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º', '125': '0,15', '250': '0,2', '500': '0,2', '1000': '0,25', '2000': '0,3', '4000': '0,3', '6000': '-' },
    { material: '–°—Ç—É–ª –º—è–≥–∫–∏–π', '125': '0,05', '250': '0,09', '500': '0,12', '1000': '0,13', '2000': '0,15', '4000': '0,16', '6000': '0,15' },
    { material: '–°—Ç—É–ª –ø–æ–ª—É–º—è–≥–∫–∏–π', '125': '0,05', '250': '0,08', '500': '0,18', '1000': '0,15', '2000': '0,17', '4000': '0,15', '6000': '0,05' },
    { material: '–°—Ç—É–ª –∂–µ—Å—Ç–∫–∏–π', '125': '0,02', '250': '0,02', '500': '0,02', '1000': '0,02', '2000': '0,02', '4000': '0,02', '6000': '0,02' },
    { material: '–°—Ç—É–ª –≤–µ–Ω—Å–∫–∏–π', '125': '0,01', '250': '0,02', '500': '0,02', '1000': '0,02', '2000': '0,02', '4000': '0,02', '6000': '0,02' },
    { material: '–ü—É–±–ª–∏–∫–∞ –Ω–∞ 1 –º¬≤', '125': '0,28', '250': '0,4', '500': '0,45', '1000': '0,49', '2000': '0,47', '4000': '0,45', '6000': '0,44' },
    { material: '–î–≤–∞ —Å–ª—É—à–∞—Ç–µ–ª—è –Ω–∞ 1 –º¬≤', '125': '0,25', '250': '0,44', '500': '0,78', '1000': '0,97', '2000': '1,0', '4000': '1,0', '6000': '1,0' },
    { material: '–¢—Ä–∏ —Å–ª—É—à–∞—Ç–µ–ª—è –Ω–∞ 1 –º¬≤', '125': '0,2', '250': '0,33', '500': '0,67', '1000': '0,84', '2000': '0,92', '4000': '0,97', '6000': '0,97' },
    { material: '–ü–æ–ª –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–π', '125': '0,05', '250': '0,04', '500': '0,03', '1000': '0,03', '2000': '0,03', '4000': '0,03', '6000': '0,03' },
    { material: '–ü–∞—Ä–∫–µ—Ç –ø–æ –∞—Å—Ñ–∞–ª—å—Ç—É', '125': '0,04', '250': '0,04', '500': '0,07', '1000': '0,06', '2000': '0,06', '4000': '0,07', '6000': '0,07' },
    { material: '–ü–∞—Ä–∫–µ—Ç –ø–æ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–º—É –æ—Å–Ω–æ–≤–∞–Ω–∏—é', '125': '0,1', '250': '0,1', '500': '0,1', '1000': '0,08', '2000': '0,06', '4000': '0,06', '6000': '-' },
    { material: '–ü–∞—Ä–∫–µ—Ç –Ω–∞ —à–ø–æ–Ω–∫–∞—Ö', '125': '0,2', '250': '0,15', '500': '0,12', '1000': '0,1', '2000': '0,08', '4000': '0,07', '6000': '0,07' },
    { material: '–ü–æ–ª –Ω–∞ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã—Ö –±–∞–ª–∫–∞—Ö', '125': '0,15', '250': '0,11', '500': '0,1', '1000': '0,07', '2000': '0,06', '4000': '0,07', '6000': '0,06' },
    { material: '–†–µ–∑–∏–Ω–∞ 5,5 –º–º –Ω–∞ –ø–æ–ª—É', '125': '0,04', '250': '0,04', '500': '0,08', '1000': '0,12', '2000': '0,03', '4000': '0,1', '6000': '0,08' },
    { material: '–†–µ–ª–∏–Ω', '125': '0,04', '250': '0,05', '500': '0,07', '1000': '0,07', '2000': '0,08', '4000': '0,08', '6000': '0,06' },
    { material: '–õ–∏–Ω–æ–ª–µ—É–º –Ω–∞ —Ç–≤—ë—Ä–¥–æ–π –æ—Å–Ω–æ–≤–µ', '125': '0,02', '250': '0,02', '500': '0,03', '1000': '0,03', '2000': '0,04', '4000': '0,04', '6000': '0,04' },
    { material: '–°—Ç–µ–Ω–∞ –æ—à—Ç—É–∫–∞—Ç—É—Ä–µ–Ω–Ω–∞—è –∏ –æ–∫—Ä–∞—à–µ–Ω–Ω–∞—è –∫—Ä–∞—Å–∫–æ–π –∫–ª–µ–µ–≤–æ–π', '125': '0,02', '250': '0,02', '500': '0,02', '1000': '0,03', '2000': '0,04', '4000': '0,04', '6000': '0,04' },
    { material: '–°—Ç–µ–Ω–∞ –æ—à—Ç—É–∫–∞—Ç—É—Ä–µ–Ω–Ω–∞—è –∏–∑–≤–µ—Å—Ç—å—é —Å —Å–µ—Ç–∫–æ–π', '125': '0,04', '250': '0,05', '500': '0,06', '1000': '0,08', '2000': '0,04', '4000': '0,06', '6000': '0,06' },
    { material: '–°—Ç–µ–Ω–∞ –ø–µ—Å–æ—á–Ω–æ-–∏–∑–≤–µ—Å—Ç–∫–æ–≤–∞—è', '125': '0,04', '250': '0,05', '500': '0,06', '1000': '0,09', '2000': '0,04', '4000': '0,06', '6000': '0,06' },
    { material: '–û–±—ã—á–Ω–∞—è –≥–∏–ø—Å–æ–≤–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞', '125': '0,04', '250': '0,04', '500': '0,04', '1000': '0,06', '2000': '0,06', '4000': '0,03', '6000': '0,07' },
    { material: '–ë–µ—Ç–æ–Ω–Ω–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∂–µ–ª–µ–∑–Ω—è–Ω–Ω–∞—è', '125': '0,01', '250': '0,01', '500': '0,01', '1000': '0,02', '2000': '0,02', '4000': '0,02', '6000': '0,02' },
  ],

  // –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ç–æ—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã
  porousAbsorbers : [
    { material: '–ú–∏–Ω–µ—Ä–∞–ª–æ–≤–∞—Ç–Ω—ã–µ –ü–ü-80', b: '-', '125': '0,08', '250': '0,3', '500': '0,64', '1000': '0,89', '2000': '0,95', '4000': '0,81', '6000': '0,73' },
    { material: '–ú–∏–Ω–µ—Ä–∞–ª–æ–≤–∞—Ç–Ω—ã–µ –ü–ü-80 (b=50)', b: '50', '125': '0,21', '250': '0,4', '500': '0,72', '1000': '0,98', '2000': '0,97', '4000': '0,79', '6000': '0,75' },
    { material: '¬´–°—Ç–∏–ª–∏—Ç¬ª', b: '-', '125': '0,43', '250': '0,98', '500': '0,89', '1000': '0,99', '2000': '0,95', '4000': '0,87', '6000': '0,75' },
    { material: '–î—Ä–µ–≤–µ—Å–Ω–æ-–≤–æ–ª–æ–∫–Ω–∏—Å—Ç—ã–µ (b=50)', b: '50', '125': '0,22', '250': '0,3', '500': '0,34', '1000': '0,32', '2000': '0,41', '4000': '0,42', '6000': '0,42' },
    { material: '–î—Ä–µ–≤–µ—Å–Ω–æ-–≤–æ–ª–æ–∫–Ω–∏—Å—Ç—ã–µ', b: '-', '125': '0,22', '250': '0,3', '500': '0,34', '1000': '0,32', '2000': '0,41', '4000': '0,42', '6000': '0,42' },
    { material: '–î—Ä–µ–≤–µ—Å–Ω–æ-–≤–æ–ª–æ–∫–Ω–∏—Å—Ç—ã–µ, 25 –º–º', b: '-', '125': '0,18', '250': '0,11', '500': '0,19', '1000': '0,39', '2000': '0,95', '4000': '0,56', '6000': '-' },
    { material: '–ê–∫—É—Å—Ç–∏—á–µ—Å–∫–∏–π ¬´–§–∏–±-—Ä–æ–ª–∏—Ç¬ª 5 –º–º', b: '-', '125': '0,06', '250': '0,16', '500': '0,25', '1000': '0,38', '2000': '0,59', '4000': '0,63', '6000': '0,59' },
    { material: '¬´–§–∏–±—Ä–æ–ª–∏—Ç¬ª 30 –º–º', b: '-', '125': '0,06', '250': '0,16', '500': '0,25', '1000': '0,38', '2000': '0,59', '4000': '0,63', '6000': '0,59' },
    { material: '¬´–§–∏–±—Ä–æ–ª–∏—Ç¬ª 30 –º–º (b=150)', b: '150', '125': '0,13', '250': '0,42', '500': '0,53', '1000': '0,35', '2000': '0,53', '4000': '0,63', '6000': '0,56' },
    { material: '–ê–∫—É—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü–ê/–î', b: '-', '125': '0,05', '250': '0,59', '500': '0,52', '1000': '0,53', '2000': '0,25', '4000': '0,11', '6000': '0,08' },
    { material: '–ê–∫—É—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü–ê/–î (b=100)', b: '100', '125': '0,34', '250': '0,62', '500': '0,52', '1000': '0,52', '2000': '0,26', '4000': '0,15', '6000': '0,14' },
    { material: '–ê–∫—É—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü–ê/–û', b: '-', '125': '0,01', '250': '0,17', '500': '0,68', '1000': '0,98', '2000': '0,86', '4000': '0,45', '6000': '0,28' },
    { material: '–ê–∫—É—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü–ê/–û (b=100)', b: '100', '125': '0,2', '250': '0,52', '500': '0,98', '1000': '0,85', '2000': '0,8', '4000': '0,45', '6000': '0,28' },
    { material: '–ê–∫—É—Å—Ç–∏—á–µ—Å–∫–∏–µ –ü–ê/–° (b=100)', b: '100', '125': '0,18', '250': '0,64', '500': '0,99', '1000': '0,93', '2000': '0,9', '4000': '0,83', '6000': '0,76' },
    { material: '–©–∏—Ç 800√ó500√ó240 –º–º', b: '-', '125': '0,39', '250': '0,58', '500': '0,89', '1000': '1,2', '2000': '1,28', '4000': '1,26', '6000': '1,33' },
    { material: '–®–µ—Å—Ç–∏–≥—Ä–∞–Ω–Ω–∞—è –ø—Ä–∏–∑–º–∞ 540√ó160 –º–º', b: '-', '125': '0,31', '250': '0,68', '500': '0,85', '1000': '1,01', '2000': '1,08', '4000': '0,95', '6000': '0,96' },
    { material: '–ü–ª–∏—Ç—ã ¬´–¢—Ä–∞–≤–µ—Ä—Ç–æ–Ω¬ª', b: '-', '125': '0,02', '250': '0,14', '500': '0,65', '1000': '0,9', '2000': '0,87', '4000': '0,86', '6000': '0,88' },
    { material: '–ü–ª–∏—Ç—ã ¬´–¢—Ä–∞–≤–µ—Ä—Ç–æ–Ω¬ª (b=100)', b: '100', '125': '0,28', '250': '0,81', '500': '0,86', '1000': '0,87', '2000': '0,89', '4000': '0,86', '6000': '0,88' },
    { material: '–ü–ª–∏—Ç—ã ¬´–ê–∫–º–∏–≥—Ä–∞–Ω¬ª (b=100)', b: '100', '125': '0,29', '250': '0,7', '500': '0,68', '1000': '0,68', '2000': '0,75', '4000': '0,74', '6000': '0,7' },
    { material: '–ü–ª–∏—Ç—ã ¬´–ë—Ä–µ–∫—á–∏—è¬ª (b=50)', b: '50', '125': '0,33', '250': '0,44', '500': '0,69', '1000': '0,88', '2000': '0,92', '4000': '0,69', '6000': '0,66' },
    { material: '¬´–ê—Ç–∏–º—Å¬ª (b=50)', b: '50', '125': '0,08', '250': '0,26', '500': '0,64', '1000': '0,89', '2000': '0,75', '4000': '0,78', '6000': '0,8' },
    { material: '–ê–¢–ú 1 ‚Äì 50 –ü', b: '-', '125': '0,36', '250': '0,76', '500': '0,98', '1000': '0,89', '2000': '0,88', '4000': '0,58', '6000': '0,47' },
    { material: '–ú–∞—Ç—ã –∏–∑ –º–∏–Ω–µ—Ä–∞–ª—å–Ω–æ–π –≤–∞—Ç—ã', b: '-', '125': '0,17', '250': '0,59', '500': '0,99', '1000': '0,98', '2000': '0,96', '4000': '0,87', '6000': '0,84' },
    { material: '–¢–∞—Ä–Ω–∞—è —Ç–∫–∞–Ω—å –≤ —Å–±–æ—Ä–∫—É (b=50)', b: '50', '125': '0,1', '250': '0,28', '500': '0,46', '1000': '0,6', '2000': '0,58', '4000': '0,6', '6000': '0,68' },
  ],

  // –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç—Ä–µ—Ç—å–µ–π —Ç–∞–±–ª–∏—Ü—ã
  membraneAbsorbers : [
     { material: '–§–∞–Ω–µ—Ä–∞ –Ω–∞ —Å—Ç–∏–ª–∏—Ç–µ', d: '100', b: '-', '125': '0,47', '250': '0,39', '500': '0,18', '1000': '0,14', '2000': '0,13', '4000': '0,12', '6000': '0,1' },
    { material: '–î—Ä–µ–≤–µ—Å–Ω–æ-—Å—Ç—Ä—É–∂–µ—á–Ω—ã–π', d: '-', b: '-', '125': '0,01', '250': '0,09', '500': '0,09', '1000': '0,08', '2000': '0,09', '4000': '0,14', '6000': '0,14' },
    { material: '–î—Ä–µ–≤–µ—Å–Ω–æ-—Å—Ç—Ä—É–∂–µ—á–Ω—ã–π (—Å –ø–ª–∞—Å—Ç–∏–∫–æ–º)', d: '100', b: '-', '125': '0,34', '250': '0,28', '500': '0,22', '1000': '0,11', '2000': '0,11', '4000': '0,12', '6000': '0,14' },
    { material: '–ë—É–º–∞–∂–Ω–æ-—Å–ª–æ–∏—Å—Ç—ã–π', d: '150', b: '-', '125': '0,52', '250': '0,38', '500': '0,22', '1000': '0,14', '2000': '0,02', '4000': '-', '6000': '-' },
    { material: '–î—é—Ä–∞–ª—é–º–∏–Ω–∏–µ–≤—ã–π', d: '50', b: '50', '125': '0,4', '250': '0,34', '500': '0,16', '1000': '0,08', '2000': '0,02', '4000': '-', '6000': '-' },
    { material: '–ü–ª–∏—Ç—ã ¬´–ê—Ü–µ–∏–¥¬ª', d: '-', b: '-', '125': '0,03', '250': '0,03', '500': '0,09', '1000': '0,08', '2000': '0,08', '4000': '0,03', '6000': '0,03' },
    { material: '–ü–ª–∏—Ç—ã ¬´–ê—Ü–µ–∏–¥¬ª (100–º–º)', d: '100', b: '-', '125': '0,38', '250': '0,28', '500': '0,21', '1000': '0,12', '2000': '0,05', '4000': '0,05', '6000': '0,04' },
    { material: '–°—É—Ö–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞', d: '-', b: '-', '125': '0,02', '250': '0,05', '500': '0,06', '1000': '0,08', '2000': '0,05', '4000': '0.05', '6000': '-' },
    { material: '–ò–Ω—Å—É–ª–∏—Ç', d: '20', b: '-', '125': '0,15', '250': '0,18', '500': '0,29', '1000': '0,32', '2000': '0,29', '4000': '0,3', '6000': '-' },
    { material: '–ê—Ä–±–æ–ª–∏—Ç', d: '20', b: '-', '125': '0,15', '250': '0,25', '500': '0,39', '1000': '0,42', '2000': '0,43', '4000': '0,42', '6000': '-' },
    { material: '–ü–µ–Ω–æ–ø–ª–∞—Å—Ç', d: '-', b: '-', '125': '0,02', '250': '0,09', '500': '0,19', '1000': '0,16', '2000': '0,14', '4000': '0,12', '6000': '0,12' },
    { material: '–ü–µ–Ω–æ–ø–ª–∞—Å—Ç (100–º–º)', d: '100', b: '-', '125': '0,51', '250': '0,38', '500': '0,28', '1000': '0,16', '2000': '0,16', '4000': '0,16', '6000': '0,16' },
    { material: '–ü–∞–Ω–µ–ª–∏ –∏–∑ ¬´–≤–æ–ª–Ω–∏—Ç–∞(50 –º–º)', d: '50', b: '-', '125': '0,16', '250': '0,72', '500': '0,93', '1000': '0,20', '2000': '0,14', '4000': '0,02', '6000': '-' },
    { material: '–ü–∞–Ω–µ–ª–∏ –∏–∑ ¬´–≤–æ–ª–Ω–∏—Ç–∞¬ª', d: '50', b: '-', '125': '0,1', '250': '0,22', '500': '0,21', '1000': '0,08', '2000': '-', '4000': '-', '6000': '-' },
    { material: '–ü–ª–∏—Ç—ã –∏–∑ –ø–æ—Ä–∏—Å—Ç–æ–π –∫–µ—Ä–∞–º–∏–∫–∏', d: '30', b: '-', '125': '0,15', '250': '0,2', '500': '0,26', '1000': '0,5', '2000': '0,66', '4000': '0,57', '6000': '-' },
    { material: '–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å', d: '50-100', b: '50', '125': '0,25', '250': '0,15', '500': '0,06', '1000': '0,05', '2000': '0,04', '4000': '-', '6000': '-' },
    { material: '–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è –æ–±—à–∏–≤–∫–∞ (—Å–æ—Å–Ω–∞)', d: '19', b: '-', '125': '0,1', '250': '0,1', '500': '0,1', '1000': '0,08', '2000': '0,08', '4000': '0,11', '6000': '-' },
    { material: '–°—É—Ö–∞—è –≥–∏–ø—Å–æ–≤–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞', d: '-', b: '50', '125': '0,23', '250': '0,31', '500': '0,13', '1000': '0,09', '2000': '0,06', '4000': '0,13', '6000': '0,04' },
    { material: '–°—É—Ö–∞—è –≥–∏–ø—Å–æ–≤–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞(100 –º–º)', d: '100', b: '-', '125': '0,65', '250': '0,34', '500': '0,23', '1000': '0,17', '2000': '0,17', '4000': '0,11', '6000': '0,10' },
    { material: '–©–∏—Ç—ã –ë–µ–∫–µ—à–∏', d: '150', b: '-', '125': '0,76', '250': '0,67', '500': '0,50', '1000': '0,24', '2000': '0,13', '4000': '0,15', '6000': '0,07' },
    { material: '–©–∏—Ç—ã –ë–µ–∫–µ—à–∏(150√ó100 –º–º)', d: '150', b: '100', '125': '0,70', '250': '0,86', '500': '0,50', '1000': '0,26', '2000': '0,12', '4000': '0,10', '6000': '0,09' },
    { material: '–ü–æ–ª–∏—Ü–∏–ª–∏–Ω–¥—Ä—ã', d: '-', b: '-', '125': '0,41', '250': '0,30', '500': '0,35', '1000': '0,16', '2000': '0,10', '4000': '0,14', '6000': '0,18' },
    { material: '–ü–æ–ª–∏—Ü–∏–ª–∏–Ω–¥—Ä—ã(50 –º–º)', d: '50', b: '-', '125': '0,51', '250': '0,44', '500': '0,39', '1000': '0,19', '2000': '0,13', '4000': '0,22', '6000': '0,28' },
  ]
};
// 2. –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å localStorage
const storageService = {
  get: (key) => {
    try {
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : null;
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –∏–∑ localStorage:', error);
      return null;
    }
  },
  set: (key, value) => {
    try {
      localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ localStorage:', error);
    }
  }
};

export default function AbsorptionTable() {
  const { user, isAdmin, logout } = useContext(AuthContext);
  const navigate = useNavigate();
  const [searchTerm, setSearchTerm] = useState('');
  const [activeTable, setActiveTable] = useState('mainAbsorbers');
  const [editingRow, setEditingRow] = useState(null);
  const [editForm, setEditForm] = useState({});
  const [tables, setTables] = useState(INITIAL_TABLES_DATA);
  const [isLoaded, setIsLoaded] = useState(false);

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  useEffect(() => {
    if (isAdmin() && window.location.pathname === '/') {
      navigate('/—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫');
    }
  }, [isAdmin, navigate]);

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  useEffect(() => {
    const savedTables = storageService.get('absorptionTables');
    if (savedTables) {
      setTables(savedTables);
    }
    setIsLoaded(true);
  }, []);

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  useEffect(() => {
    if (isLoaded) {
      storageService.set('absorptionTables', tables);
    }
  }, [tables, isLoaded]);

  const filterData = (data) => {
    if (!searchTerm) return data;
    return data.filter(item => 
      Object.values(item).some(val => 
        String(val).toLowerCase().includes(searchTerm.toLowerCase())
      )
    );
  };

  const filteredData = filterData(tables[activeTable]);

  const handleEdit = (row) => {
    setEditingRow(row.material);
    setEditForm({...row});
  };

  const handleSave = () => {
    const updatedTables = {
      ...tables,
      [activeTable]: tables[activeTable].map(item => 
        item.material === editingRow ? editForm : item
      )
    };
    setTables(updatedTables);
    setEditingRow(null);
  };

  const handleDelete = (material) => {
    const updatedTables = {
      ...tables,
      [activeTable]: tables[activeTable].filter(item => item.material !== material)
    };
    setTables(updatedTables);
  };

  const handleAdd = () => {
    const newRow = {
      material: `–ù–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª ${Date.now().toString().slice(-4)}`,
      '125': '0', '250': '0', '500': '0', '1000': '0',
      '2000': '0', '4000': '0', '6000': '0'
    };
    
    if (activeTable === 'porousAbsorbers') newRow.b = '-';
    if (activeTable === 'membraneAbsorbers') {
      newRow.d = '-';
      newRow.b = '-';
    }

    const updatedTables = {
      ...tables,
      [activeTable]: [...tables[activeTable], newRow]
    };
    setTables(updatedTables);
    setEditingRow(newRow.material);
    setEditForm(newRow);
  };

  const handleLogout = () => {
    logout();
    navigate('/');
  };

  const renderCell = (key, value, row) => {
    if (editingRow === row.material) {
      return (
        <td key={key}>
          <input
            type="text"
            value={editForm[key] || ''}
            onChange={(e) => setEditForm({
              ...editForm,
              [key]: e.target.value
            })}
            className="edit-input"
          />
        </td>
      );
    }
    return <td key={key}>{value}</td>;
  };

  return (
    <div className="container">
      <header>
        <h1>–¢–∞–±–ª–∏—Ü—ã –∑–≤—É–∫–æ–ø–æ–≥–ª–æ—â–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h1>
        <div className="header-controls">
          {user && (
            <div className="user-actions">
              {isAdmin() ? (
                <>
                  <span className="welcome-text">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {user.username}!</span>
                  <button onClick={handleLogout} className="styled-button logout">
                    –í—ã–π—Ç–∏
                  </button>
                </>
              ) : (
                <Link to="/" className="styled-button home-link">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                  </svg>
                  –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </Link>
              )}
            </div>
          )}
          {isAdmin() && (
            <div className="admin-actions">
              <button onClick={handleAdd} className="styled-button add">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                </svg>
                –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
              </button>
            </div>
          )}
        </div>
      </header>

      <div className="table-tabs">
        <button
          onClick={() => setActiveTable('mainAbsorbers')}
          className={activeTable === 'mainAbsorbers' ? 'active' : ''}
        >
          –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–≥–ª–æ—Ç–∏—Ç–µ–ª–∏
        </button>
        <button
          onClick={() => setActiveTable('porousAbsorbers')}
          className={activeTable === 'porousAbsorbers' ? 'active' : ''}
        >
          –ü–æ—Ä–∏—Å—Ç—ã–µ –ø–æ–≥–ª–æ—Ç–∏—Ç–µ–ª–∏
        </button>
        <button
          onClick={() => setActiveTable('membraneAbsorbers')}
          className={activeTable === 'membraneAbsorbers' ? 'active' : ''}
        >
          –ú–µ–º–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–≥–ª–æ—Ç–∏—Ç–µ–ª–∏
        </button>
      </div>

      <div className="search-container">
        <input
          type="text"
          placeholder="–ü–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      {editingRow && (
        <div className="edit-controls">
          <button onClick={handleSave} className="save-button">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </button>
          <button 
            onClick={() => setEditingRow(null)} 
            className="cancel-button"
          >
            –û—Ç–º–µ–Ω–∏—Ç—å
          </button>
        </div>
      )}

      <div className="table-wrapper">
        <table>
          <thead>
            <tr>
              {filteredData.length > 0 && Object.keys(filteredData[0]).map(key => (
                <th key={key}>{key}</th>
              ))}
              {isAdmin() && <th>–î–µ–π—Å—Ç–≤–∏—è</th>}
            </tr>
          </thead>
          <tbody>
            {filteredData.map((row) => (
              <tr key={row.material}>
                {Object.entries(row).map(([key, value]) => 
                  renderCell(key, value, row)
                )}
                {isAdmin() && (
                  <td className="actions">
                    {editingRow !== row.material && (
                      <>
                        <button 
                          onClick={() => handleEdit(row)}
                          className="edit-button"
                        >
                          ‚úèÔ∏è
                        </button>
                        <button 
                          onClick={() => handleDelete(row.material)}
                          className="delete-button"
                        >
                          üóëÔ∏è
                        </button>
                      </>
                    )}
                  </td>
                )}
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <div className="navigation-links">
        <Link to="/">–ù–∞ –≥–ª–∞–≤–Ω—É—é</Link>
        
      </div>

      <footer>
        <p>&copy; 2025 –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</p>
      </footer>
    </div>
  );
}